import{r as a,h as f,j as e,C as y,L as v}from"./index-DA6Na_pq.js";import{b as S,a as b}from"./CContainer-Pekuqi4V.js";import{C as h,a as p}from"./CRow-i1kvomWg.js";import{C as w}from"./CCardGroup-CLEx2cCo.js";import{C as N,a as E}from"./CCardBody-6Dx6aIub.js";import{C as L}from"./CForm-DD-bYS1P.js";import{C as k}from"./CAlert-BpsfxQKq.js";import{C as u}from"./CFormLabel-Dr99k2io.js";import{C as x}from"./CFormInput-Djvhovm-.js";import"./CCloseButton-Dh6QjDBd.js";import"./CFormControlWrapper-Byw6dZ_c.js";import"./CFormControlValidation-D2muq1_r.js";const J=()=>{const[i,j]=a.useState(""),[n,g]=a.useState(""),[c,t]=a.useState(""),[d,l]=a.useState(!1),m=f();a.useEffect(()=>{localStorage.removeItem("authToken"),localStorage.removeItem("type")},[]);const C=async s=>{if(s.preventDefault(),t(""),l(!0),!i||!n){t("Please enter both email and password"),l(!1);return}try{const o=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:n})}),r=await o.json();o.ok&&r.token?(localStorage.setItem("authToken",r.token),localStorage.setItem("type",r.user.type),console.log(r.user.type),r.user.type==="Non-Technical"?m("/dashboard"):m("/technical-dashboard")):t(r.error||"Invalid credentials")}catch(o){console.error("Login Error:",o),t("Server error. Please try again later.")}finally{l(!1)}};return e.jsx("div",{className:"bg-light min-vh-100 d-flex flex-row align-items-center",children:e.jsx(S,{children:e.jsx(h,{className:"justify-content-center",children:e.jsx(p,{md:8,children:e.jsx(w,{children:e.jsx(N,{className:"p-4",children:e.jsx(E,{children:e.jsxs(L,{onSubmit:C,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-medium-emphasis",children:"Sign in to your account"}),c&&e.jsx(k,{color:"danger",children:c}),e.jsxs("div",{className:"mb-3",children:[e.jsx(u,{htmlFor:"email",children:"Email"}),e.jsx(x,{type:"email",id:"email",placeholder:"Enter your email",value:i,onChange:s=>j(s.target.value),required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(u,{htmlFor:"password",children:"Password"}),e.jsx(x,{type:"password",id:"password",placeholder:"Enter your password",value:n,onChange:s=>g(s.target.value),required:!0})]}),e.jsx(h,{children:e.jsx(p,{xs:6,children:e.jsx(b,{color:"primary",type:"submit",className:"px-4",disabled:d,children:d?e.jsx(y,{size:"sm"}):"Login"})})}),e.jsxs("div",{className:"text-center mt-3",children:[e.jsx("span",{children:"Don't have an account? "}),e.jsx(v,{to:"/register",children:"Register here"})]})]})})})})})})})})};export{J as default};
