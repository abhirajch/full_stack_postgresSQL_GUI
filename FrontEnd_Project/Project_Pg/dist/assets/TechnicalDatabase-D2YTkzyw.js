import{r,h as p,j as a}from"./index-DA6Na_pq.js";import{a as n}from"./baseURL-D-lPueBZ.js";import{b as x,a as t}from"./CContainer-Pekuqi4V.js";import{C as f,a as u}from"./CRow-i1kvomWg.js";import{C as j,a as b}from"./CCardBody-6Dx6aIub.js";import{C as y}from"./CCardHeader-DZP1FFa0.js";import{C as D,a as g}from"./CListGroupItem-CviFQD5Y.js";import{C as w,a as E,b as v,c as N}from"./CModalHeader-ItFSIcCL.js";import{C as T}from"./CModalTitle-CNsi78iC.js";import{C as A}from"./CFormTextarea-DMxNwqfq.js";import"./DefaultLayout-D05Jrs9N.js";import"./index.esm-BxhKCtHB.js";import"./CCloseButton-Dh6QjDBd.js";import"./cil-user-Dlmw-Gem.js";import"./CFormControlWrapper-Byw6dZ_c.js";import"./CFormControlValidation-D2muq1_r.js";import"./CFormLabel-Dr99k2io.js";const O=()=>{const[i,s]=r.useState(!1),[o,c]=r.useState(""),[d,m]=r.useState([]),C=p(),l=async()=>{try{const e=await n.get("/sql/databases");m(e.data.rows)}catch(e){console.error("Error fetching databases:",e)}};r.useEffect(()=>{l()},[]);const h=async()=>{try{const e=await n.post("/sql/execute",{query:o});e.status===200?(alert("Database created successfully"),l(),s(!1),c("")):alert(e.data.error||"Failed to create database")}catch(e){console.error(e),alert("Server error")}};return a.jsxs(x,{className:"mt-5",children:[a.jsx(f,{className:"justify-content-center",children:a.jsx(u,{md:10,children:a.jsxs(j,{children:[a.jsxs(y,{className:"d-flex justify-content-between align-items-center",children:[a.jsx("h5",{children:"Technical Dashboard"}),a.jsx(t,{color:"primary",onClick:()=>s(!0),children:"+ Add Dashboard"})]}),a.jsxs(b,{children:[a.jsx("h6",{className:"mb-3",children:"Databases"}),a.jsx(D,{children:d.map(e=>a.jsxs(g,{component:"button",style:{cursor:"pointer"},onClick:()=>C("/technical-table",{state:{dbname:e.datname}}),children:["📁 ",e.datname]},e.datname))})]})]})})}),a.jsxs(w,{visible:i,onClose:()=>s(!1),children:[a.jsx(E,{onClose:()=>s(!1),children:a.jsx(T,{children:"Create New Database"})}),a.jsx(v,{children:a.jsx(A,{rows:4,value:o,onChange:e=>c(e.target.value),placeholder:"CREATE DATABASE my_database;"})}),a.jsxs(N,{children:[a.jsx(t,{color:"secondary",onClick:()=>s(!1),children:"Cancel"}),a.jsx(t,{color:"primary",onClick:h,children:"Create"})]})]})]})};export{O as default};
